import{c as ae,M as wa,i as ba,f as x,n as hr,d as q,k as Pa,N as ka,O as Sa,I as Da,P as Na,l as Ir,Q as ia,R as La,h as va,S as la,e as Ta}from"./isVisible-ClYBi9Sb.js";import{u as za,P as Ma}from"./useId-DnjRaG_e.js";import{R as Ca}from"./index-DERUwa1-.js";import{r as o}from"./index-CQRfQbsL.js";const Wa=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var r=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r==null?void 0:r.substr(0,4))};function xa(r){var n=r.prefixCls,e=r.align,t=r.arrow,l=r.arrowPos,u=t||{},c=u.className,d=u.content,m=l.x,g=m===void 0?0:m,H=l.y,h=H===void 0?0:H,C=o.useRef();if(!e||!e.points)return null;var s={position:"absolute"};if(e.autoArrow!==!1){var k=e.points[0],z=e.points[1],N=k[0],S=k[1],$=z[0],L=z[1];N===$||!["t","b"].includes(N)?s.top=h:N==="t"?s.top=0:s.bottom=0,S===L||!["l","r"].includes(S)?s.left=g:S==="l"?s.left=0:s.right=0}return o.createElement("div",{ref:C,className:ae("".concat(n,"-arrow"),c),style:s},d)}function Ha(r){var n=r.prefixCls,e=r.open,t=r.zIndex,l=r.mask,u=r.motion;return l?o.createElement(wa,ba({},u,{motionAppear:!0,visible:e,removeOnLeave:!0}),function(c){var d=c.className;return o.createElement("div",{style:{zIndex:t},className:ae("".concat(n,"-mask"),d)})}):null}var $a=o.memo(function(r){var n=r.children;return n},function(r,n){return n.cache}),Ba=o.forwardRef(function(r,n){var e=r.popup,t=r.className,l=r.prefixCls,u=r.style,c=r.target,d=r.onVisibleChanged,m=r.open,g=r.keepDom,H=r.fresh,h=r.onClick,C=r.mask,s=r.arrow,k=r.arrowPos,z=r.align,N=r.motion,S=r.maskMotion,$=r.forceRender,L=r.getPopupContainer,U=r.autoDestroy,J=r.portal,v=r.zIndex,kr=r.onMouseEnter,Sr=r.onMouseLeave,mr=r.onPointerEnter,Dr=r.onPointerDownCapture,Er=r.ready,gr=r.offsetX,yr=r.offsetY,ir=r.offsetR,wr=r.offsetB,Q=r.onAlign,br=r.onPrepare,B=r.stretch,F=r.targetWidth,f=r.targetHeight,Fr=typeof e=="function"?e():e,rr=m||g,E=(L==null?void 0:L.length)>0,y=o.useState(!L||!E),G=x(y,2),jr=G[0],ne=G[1];if(hr(function(){!jr&&E&&c&&ne(!0)},[jr,E,c]),!jr)return null;var lr="auto",K={left:"-1000vw",top:"-1000vh",right:lr,bottom:lr};if(Er||!m){var Nr,Ar=z.points,I=z.dynamicInset||((Nr=z._experimental)===null||Nr===void 0?void 0:Nr.dynamicInset),ur=I&&Ar[0][1]==="r",er=I&&Ar[0][0]==="b";ur?(K.right=ir,K.left=lr):(K.left=gr,K.right=lr),er?(K.bottom=wr,K.top=lr):(K.top=yr,K.bottom=lr)}var V={};return B&&(B.includes("height")&&f?V.height=f:B.includes("minHeight")&&f&&(V.minHeight=f),B.includes("width")&&F?V.width=F:B.includes("minWidth")&&F&&(V.minWidth=F)),m||(V.pointerEvents="none"),o.createElement(J,{open:$||rr,getContainer:L&&function(){return L(c)},autoDestroy:U},o.createElement(Ha,{prefixCls:l,open:m,zIndex:v,mask:C,motion:S}),o.createElement(Ca,{onResize:Q,disabled:!m},function(te){return o.createElement(wa,ba({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:$,leavedClassName:"".concat(l,"-hidden")},N,{onAppearPrepare:br,onEnterPrepare:br,visible:m,onVisibleChanged:function(_){var sr;N==null||(sr=N.onVisibleChanged)===null||sr===void 0||sr.call(N,_),d(_)}}),function(Lr,_){var sr=Lr.className,Rr=Lr.style,j=ae(l,sr,t);return o.createElement("div",{ref:Pa(te,n,_),className:j,style:q(q(q(q({"--arrow-x":"".concat(k.x||0,"px"),"--arrow-y":"".concat(k.y||0,"px")},K),V),Rr),{},{boxSizing:"border-box",zIndex:v},u),onMouseEnter:kr,onMouseLeave:Sr,onPointerEnter:mr,onClick:h,onPointerDownCapture:Dr},s&&o.createElement(xa,{prefixCls:l,arrow:s,arrowPos:k,align:z}),o.createElement($a,{cache:!m&&!H},Fr))})}))}),Ea=o.forwardRef(function(r,n){var e=r.children,t=r.getTriggerDOMNode,l=ka(e),u=o.useCallback(function(d){Sa(n,t?t(d):d)},[t]),c=Da(u,Na(e));return l?o.cloneElement(e,{ref:c}):e}),ca=o.createContext(null);function da(r){return r?Array.isArray(r)?r:[r]:[]}function Fa(r,n,e,t){return o.useMemo(function(){var l=da(e??n),u=da(t??n),c=new Set(l),d=new Set(u);return r&&(c.has("hover")&&(c.delete("hover"),c.add("click")),d.has("hover")&&(d.delete("hover"),d.add("click"))),[c,d]},[r,n,e,t])}function ja(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2?arguments[2]:void 0;return e?r[0]===n[0]:r[0]===n[0]&&r[1]===n[1]}function Aa(r,n,e,t){for(var l=e.points,u=Object.keys(r),c=0;c<u.length;c+=1){var d,m=u[c];if(ja((d=r[m])===null||d===void 0?void 0:d.points,l,t))return"".concat(n,"-placement-").concat(m)}return""}function fa(r,n,e,t){return n||(e?{motionName:"".concat(r,"-").concat(e)}:t?{motionName:t}:null)}function me(r){return r.ownerDocument.defaultView}function ua(r){for(var n=[],e=r==null?void 0:r.parentElement,t=["hidden","scroll","clip","auto"];e;){var l=me(e).getComputedStyle(e),u=l.overflowX,c=l.overflowY,d=l.overflow;[u,c,d].some(function(m){return t.includes(m)})&&n.push(e),e=e.parentElement}return n}function he(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(r)?n:r}function fe(r){return he(parseFloat(r),0)}function ha(r,n){var e=q({},r);return(n||[]).forEach(function(t){if(!(t instanceof HTMLBodyElement||t instanceof HTMLHtmlElement)){var l=me(t).getComputedStyle(t),u=l.overflow,c=l.overflowClipMargin,d=l.borderTopWidth,m=l.borderBottomWidth,g=l.borderLeftWidth,H=l.borderRightWidth,h=t.getBoundingClientRect(),C=t.offsetHeight,s=t.clientHeight,k=t.offsetWidth,z=t.clientWidth,N=fe(d),S=fe(m),$=fe(g),L=fe(H),U=he(Math.round(h.width/k*1e3)/1e3),J=he(Math.round(h.height/C*1e3)/1e3),v=(k-z-$-L)*U,kr=(C-s-N-S)*J,Sr=N*J,mr=S*J,Dr=$*U,Er=L*U,gr=0,yr=0;if(u==="clip"){var ir=fe(c);gr=ir*U,yr=ir*J}var wr=h.x+Dr-gr,Q=h.y+Sr-yr,br=wr+h.width+2*gr-Dr-Er-v,B=Q+h.height+2*yr-Sr-mr-kr;e.left=Math.max(e.left,wr),e.top=Math.max(e.top,Q),e.right=Math.min(e.right,br),e.bottom=Math.min(e.bottom,B)}}),e}function ma(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e="".concat(n),t=e.match(/^(.*)\%$/);return t?r*(parseFloat(t[1])/100):parseFloat(e)}function ga(r,n){var e=n||[],t=x(e,2),l=t[0],u=t[1];return[ma(r.width,l),ma(r.height,u)]}function ya(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[r[0],r[1]]}function ee(r,n){var e=n[0],t=n[1],l,u;return e==="t"?u=r.y:e==="b"?u=r.y+r.height:u=r.y+r.height/2,t==="l"?l=r.x:t==="r"?l=r.x+r.width:l=r.x+r.width/2,{x:l,y:u}}function Br(r,n){var e={t:"b",b:"t",l:"r",r:"l"};return r.map(function(t,l){return l===n?e[t]||"c":t}).join("")}function Ra(r,n,e,t,l,u,c){var d=o.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:l[t]||{}}),m=x(d,2),g=m[0],H=m[1],h=o.useRef(0),C=o.useMemo(function(){return n?ua(n):[]},[n]),s=o.useRef({}),k=function(){s.current={}};r||k();var z=Ir(function(){if(n&&e&&r){let p=function(re,Hr){var $r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ge,de=y.x+re,$e=y.y+Hr,aa=de+ur,na=$e+I,ta=Math.max(de,$r.left),a=Math.max($e,$r.top),i=Math.min(aa,$r.right),P=Math.min(na,$r.bottom);return Math.max(0,(i-ta)*(P-a))},He=function(){Jr=y.y+M,Qr=Jr+I,Cr=y.x+w,Xr=Cr+ur};var $,L,U,J,v=n,kr=v.ownerDocument,Sr=me(v),mr=Sr.getComputedStyle(v),Dr=mr.width,Er=mr.height,gr=mr.position,yr=v.style.left,ir=v.style.top,wr=v.style.right,Q=v.style.bottom,br=v.style.overflow,B=q(q({},l[t]),u),F=kr.createElement("div");($=v.parentElement)===null||$===void 0||$.appendChild(F),F.style.left="".concat(v.offsetLeft,"px"),F.style.top="".concat(v.offsetTop,"px"),F.style.position=gr,F.style.height="".concat(v.offsetHeight,"px"),F.style.width="".concat(v.offsetWidth,"px"),v.style.left="0",v.style.top="0",v.style.right="auto",v.style.bottom="auto",v.style.overflow="hidden";var f;if(Array.isArray(e))f={x:e[0],y:e[1],width:0,height:0};else{var Fr,rr,E=e.getBoundingClientRect();E.x=(Fr=E.x)!==null&&Fr!==void 0?Fr:E.left,E.y=(rr=E.y)!==null&&rr!==void 0?rr:E.top,f={x:E.x,y:E.y,width:E.width,height:E.height}}var y=v.getBoundingClientRect();y.x=(L=y.x)!==null&&L!==void 0?L:y.left,y.y=(U=y.y)!==null&&U!==void 0?U:y.top;var G=kr.documentElement,jr=G.clientWidth,ne=G.clientHeight,lr=G.scrollWidth,K=G.scrollHeight,Nr=G.scrollTop,Ar=G.scrollLeft,I=y.height,ur=y.width,er=f.height,V=f.width,te={left:0,top:0,right:jr,bottom:ne},Lr={left:-Ar,top:-Nr,right:lr-Ar,bottom:K-Nr},_=B.htmlRegion,sr="visible",Rr="visibleFirst";_!=="scroll"&&_!==Rr&&(_=sr);var j=_===Rr,Fe=ha(Lr,C),b=ha(te,C),ge=_===sr?b:Fe,qr=j?b:ge;v.style.left="auto",v.style.top="auto",v.style.right="0",v.style.bottom="0";var A=v.getBoundingClientRect();v.style.left=yr,v.style.top=ir,v.style.right=wr,v.style.bottom=Q,v.style.overflow=br,(J=v.parentElement)===null||J===void 0||J.removeChild(F);var Tr=he(Math.round(ur/parseFloat(Dr)*1e3)/1e3),Mr=he(Math.round(I/parseFloat(Er)*1e3)/1e3);if(Tr===0||Mr===0||ia(e)&&!La(e))return;var je=B.offset,Ae=B.targetOffset,ye=ga(y,je),ar=x(ye,2),nr=ar[0],X=ar[1],Re=ga(f,Ae),Vr=x(Re,2),Y=Vr[0],zr=Vr[1];f.x-=Y,f.y-=zr;var qe=B.points||[],we=x(qe,2),Ve=we[0],Ue=we[1],vr=ya(Ue),Z=ya(Ve),oe=ee(f,vr),R=ee(y,Z),Wr=q({},B),w=oe.x-R.x+nr,M=oe.y-R.y+X,tr=p(w,M),Ur=p(w,M,b),ie=ee(f,["t","l"]),O=ee(y,["t","l"]),be=ee(f,["b","r"]),le=ee(y,["b","r"]),xr=B.overflow||{},Me=xr.adjustX,Je=xr.adjustY,ue=xr.shiftX,_r=xr.shiftY,se=function(Hr){return typeof Hr=="boolean"?Hr:Hr>=0},Jr,Qr,Cr,Xr;He();var Gr=se(Je),Ce=Z[0]===vr[0];if(Gr&&Z[0]==="t"&&(Qr>qr.bottom||s.current.bt)){var W=M;Ce?W-=I-er:W=ie.y-le.y-X;var Pe=p(w,W),Qe=p(w,W,b);Pe>tr||Pe===tr&&(!j||Qe>=Ur)?(s.current.bt=!0,M=W,X=-X,Wr.points=[Br(Z,0),Br(vr,0)]):s.current.bt=!1}if(Gr&&Z[0]==="b"&&(Jr<qr.top||s.current.tb)){var Kr=M;Ce?Kr+=I-er:Kr=be.y-O.y-X;var ke=p(w,Kr),Ge=p(w,Kr,b);ke>tr||ke===tr&&(!j||Ge>=Ur)?(s.current.tb=!0,M=Kr,X=-X,Wr.points=[Br(Z,0),Br(vr,0)]):s.current.tb=!1}var Se=se(Me),De=Z[1]===vr[1];if(Se&&Z[1]==="l"&&(Xr>qr.right||s.current.rl)){var Zr=w;De?Zr-=ur-V:Zr=ie.x-le.x-nr;var Ne=p(Zr,M),Yr=p(Zr,M,b);Ne>tr||Ne===tr&&(!j||Yr>=Ur)?(s.current.rl=!0,w=Zr,nr=-nr,Wr.points=[Br(Z,1),Br(vr,1)]):s.current.rl=!1}if(Se&&Z[1]==="r"&&(Cr<qr.left||s.current.lr)){var Pr=w;De?Pr+=ur-V:Pr=be.x-O.x-nr;var Le=p(Pr,M),Te=p(Pr,M,b);Le>tr||Le===tr&&(!j||Te>=Ur)?(s.current.lr=!0,w=Pr,nr=-nr,Wr.points=[Br(Z,1),Br(vr,1)]):s.current.lr=!1}He();var cr=ue===!0?0:ue;typeof cr=="number"&&(Cr<b.left&&(w-=Cr-b.left-nr,f.x+V<b.left+cr&&(w+=f.x-b.left+V-cr)),Xr>b.right&&(w-=Xr-b.right-nr,f.x>b.right-cr&&(w+=f.x-b.right+cr)));var or=_r===!0?0:_r;typeof or=="number"&&(Jr<b.top&&(M-=Jr-b.top-X,f.y+er<b.top+or&&(M+=f.y-b.top+er-or)),Qr>b.bottom&&(M-=Qr-b.bottom-X,f.y>b.bottom-or&&(M+=f.y-b.bottom+or)));var Or=y.x+w,pr=Or+ur,dr=y.y+M,Ke=dr+I,ze=f.x,Ze=ze+V,ve=f.y,Ie=ve+er,_e=Math.max(Or,ze),Xe=Math.min(pr,Ze),We=(_e+Xe)/2,Ye=We-Or,Oe=Math.max(dr,ve),xe=Math.min(Ke,Ie),pe=(Oe+xe)/2,ra=pe-dr;c==null||c(n,Wr);var ce=A.right-y.x-(w+y.width),fr=A.bottom-y.y-(M+y.height);Tr===1&&(w=Math.round(w),ce=Math.round(ce)),Mr===1&&(M=Math.round(M),fr=Math.round(fr));var ea={ready:!0,offsetX:w/Tr,offsetY:M/Mr,offsetR:ce/Tr,offsetB:fr/Mr,arrowX:Ye/Tr,arrowY:ra/Mr,scaleX:Tr,scaleY:Mr,align:Wr};H(ea)}}),N=function(){h.current+=1;var L=h.current;Promise.resolve().then(function(){h.current===L&&z()})},S=function(){H(function(L){return q(q({},L),{},{ready:!1})})};return hr(S,[t]),hr(function(){r||S()},[r]),[g.ready,g.offsetX,g.offsetY,g.offsetR,g.offsetB,g.arrowX,g.arrowY,g.scaleX,g.scaleY,g.align,N]}function qa(r,n,e,t,l){hr(function(){if(r&&n&&e){let h=function(){t(),l()};var u=n,c=e,d=ua(u),m=ua(c),g=me(c),H=new Set([g].concat(va(d),va(m)));return H.forEach(function(C){C.addEventListener("scroll",h,{passive:!0})}),g.addEventListener("resize",h,{passive:!0}),t(),function(){H.forEach(function(C){C.removeEventListener("scroll",h),g.removeEventListener("resize",h)})}}},[r,n,e])}function Va(r,n,e,t,l,u,c,d){var m=o.useRef(r);m.current=r;var g=o.useRef(!1);o.useEffect(function(){if(n&&t&&(!l||u)){var h=function(){g.current=!1},C=function(N){var S;m.current&&!c(((S=N.composedPath)===null||S===void 0||(S=S.call(N))===null||S===void 0?void 0:S[0])||N.target)&&!g.current&&d(!1)},s=me(t);s.addEventListener("pointerdown",h,!0),s.addEventListener("mousedown",C,!0),s.addEventListener("contextmenu",C,!0);var k=la(e);return k&&(k.addEventListener("mousedown",C,!0),k.addEventListener("contextmenu",C,!0)),function(){s.removeEventListener("pointerdown",h,!0),s.removeEventListener("mousedown",C,!0),s.removeEventListener("contextmenu",C,!0),k&&(k.removeEventListener("mousedown",C,!0),k.removeEventListener("contextmenu",C,!0))}}},[n,e,t,l,u]);function H(){g.current=!0}return H}var Ua=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Ja(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ma,n=o.forwardRef(function(e,t){var l=e.prefixCls,u=l===void 0?"rc-trigger-popup":l,c=e.children,d=e.action,m=d===void 0?"hover":d,g=e.showAction,H=e.hideAction,h=e.popupVisible,C=e.defaultPopupVisible,s=e.onPopupVisibleChange,k=e.afterPopupVisibleChange,z=e.mouseEnterDelay,N=e.mouseLeaveDelay,S=N===void 0?.1:N,$=e.focusDelay,L=e.blurDelay,U=e.mask,J=e.maskClosable,v=J===void 0?!0:J,kr=e.getPopupContainer,Sr=e.forceRender,mr=e.autoDestroy,Dr=e.destroyPopupOnHide,Er=e.popup,gr=e.popupClassName,yr=e.popupStyle,ir=e.popupPlacement,wr=e.builtinPlacements,Q=wr===void 0?{}:wr,br=e.popupAlign,B=e.zIndex,F=e.stretch,f=e.getPopupClassNameFromAlign,Fr=e.fresh,rr=e.alignPoint,E=e.onPopupClick,y=e.onPopupAlign,G=e.arrow,jr=e.popupMotion,ne=e.maskMotion,lr=e.popupTransitionName,K=e.popupAnimation,Nr=e.maskTransitionName,Ar=e.maskAnimation,I=e.className,ur=e.getTriggerDOMNode,er=Ta(e,Ua),V=mr||Dr||!1,te=o.useState(!1),Lr=x(te,2),_=Lr[0],sr=Lr[1];hr(function(){sr(Wa())},[]);var Rr=o.useRef({}),j=o.useContext(ca),Fe=o.useMemo(function(){return{registerSubPopup:function(i,P){Rr.current[i]=P,j==null||j.registerSubPopup(i,P)}}},[j]),b=za(),ge=o.useState(null),qr=x(ge,2),A=qr[0],Tr=qr[1],Mr=o.useRef(null),je=Ir(function(a){Mr.current=a,ia(a)&&A!==a&&Tr(a),j==null||j.registerSubPopup(b,a)}),Ae=o.useState(null),ye=x(Ae,2),ar=ye[0],nr=ye[1],X=o.useRef(null),Re=Ir(function(a){ia(a)&&ar!==a&&(nr(a),X.current=a)}),Vr=o.Children.only(c),Y=(Vr==null?void 0:Vr.props)||{},zr={},qe=Ir(function(a){var i,P,T=ar;return(T==null?void 0:T.contains(a))||((i=la(T))===null||i===void 0?void 0:i.host)===a||a===T||(A==null?void 0:A.contains(a))||((P=la(A))===null||P===void 0?void 0:P.host)===a||a===A||Object.values(Rr.current).some(function(D){return(D==null?void 0:D.contains(a))||a===D})}),we=fa(u,jr,K,lr),Ve=fa(u,ne,Ar,Nr),Ue=o.useState(C||!1),vr=x(Ue,2),Z=vr[0],oe=vr[1],R=h??Z,Wr=Ir(function(a){h===void 0&&oe(a)});hr(function(){oe(h||!1)},[h]);var w=o.useRef(R);w.current=R;var M=o.useRef([]);M.current=[];var tr=Ir(function(a){var i;Wr(a),((i=M.current[M.current.length-1])!==null&&i!==void 0?i:R)!==a&&(M.current.push(a),s==null||s(a))}),Ur=o.useRef(),ie=function(){clearTimeout(Ur.current)},O=function(i){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ie(),P===0?tr(i):Ur.current=setTimeout(function(){tr(i)},P*1e3)};o.useEffect(function(){return ie},[]);var be=o.useState(!1),le=x(be,2),xr=le[0],Me=le[1];hr(function(a){(!a||R)&&Me(!0)},[R]);var Je=o.useState(null),ue=x(Je,2),_r=ue[0],se=ue[1],Jr=o.useState(null),Qr=x(Jr,2),Cr=Qr[0],Xr=Qr[1],Gr=function(i){Xr([i.clientX,i.clientY])},Ce=Ra(R,A,rr&&Cr!==null?Cr:ar,ir,Q,br,y),W=x(Ce,11),Pe=W[0],Qe=W[1],Kr=W[2],ke=W[3],Ge=W[4],Se=W[5],De=W[6],Zr=W[7],Ne=W[8],Yr=W[9],Pr=W[10],Le=Fa(_,m,g,H),Te=x(Le,2),cr=Te[0],or=Te[1],Or=cr.has("click"),pr=or.has("click")||or.has("contextMenu"),dr=Ir(function(){xr||Pr()}),Ke=function(){w.current&&rr&&pr&&O(!1)};qa(R,ar,A,dr,Ke),hr(function(){dr()},[Cr,ir]),hr(function(){R&&!(Q!=null&&Q[ir])&&dr()},[JSON.stringify(br)]);var ze=o.useMemo(function(){var a=Aa(Q,u,Yr,rr);return ae(a,f==null?void 0:f(Yr))},[Yr,f,Q,u,rr]);o.useImperativeHandle(t,function(){return{nativeElement:X.current,popupElement:Mr.current,forceAlign:dr}});var Ze=o.useState(0),ve=x(Ze,2),Ie=ve[0],_e=ve[1],Xe=o.useState(0),We=x(Xe,2),Ye=We[0],Oe=We[1],xe=function(){if(F&&ar){var i=ar.getBoundingClientRect();_e(i.width),Oe(i.height)}},pe=function(){xe(),dr()},ra=function(i){Me(!1),Pr(),k==null||k(i)},ce=function(){return new Promise(function(i){xe(),se(function(){return i})})};hr(function(){_r&&(Pr(),_r(),se(null))},[_r]);function fr(a,i,P,T){zr[a]=function(D){var Be;T==null||T(D),O(i,P);for(var oa=arguments.length,sa=new Array(oa>1?oa-1:0),Ee=1;Ee<oa;Ee++)sa[Ee-1]=arguments[Ee];(Be=Y[a])===null||Be===void 0||Be.call.apply(Be,[Y,D].concat(sa))}}(Or||pr)&&(zr.onClick=function(a){var i;w.current&&pr?O(!1):!w.current&&Or&&(Gr(a),O(!0));for(var P=arguments.length,T=new Array(P>1?P-1:0),D=1;D<P;D++)T[D-1]=arguments[D];(i=Y.onClick)===null||i===void 0||i.call.apply(i,[Y,a].concat(T))});var ea=Va(R,pr,ar,A,U,v,qe,O),p=cr.has("hover"),He=or.has("hover"),re,Hr;p&&(fr("onMouseEnter",!0,z,function(a){Gr(a)}),fr("onPointerEnter",!0,z,function(a){Gr(a)}),re=function(i){(R||xr)&&A!==null&&A!==void 0&&A.contains(i.target)&&O(!0,z)},rr&&(zr.onMouseMove=function(a){var i;(i=Y.onMouseMove)===null||i===void 0||i.call(Y,a)})),He&&(fr("onMouseLeave",!1,S),fr("onPointerLeave",!1,S),Hr=function(){O(!1,S)}),cr.has("focus")&&fr("onFocus",!0,$),or.has("focus")&&fr("onBlur",!1,L),cr.has("contextMenu")&&(zr.onContextMenu=function(a){var i;w.current&&or.has("contextMenu")?O(!1):(Gr(a),O(!0)),a.preventDefault();for(var P=arguments.length,T=new Array(P>1?P-1:0),D=1;D<P;D++)T[D-1]=arguments[D];(i=Y.onContextMenu)===null||i===void 0||i.call.apply(i,[Y,a].concat(T))}),I&&(zr.className=ae(Y.className,I));var $r=q(q({},Y),zr),de={},$e=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];$e.forEach(function(a){er[a]&&(de[a]=function(){for(var i,P=arguments.length,T=new Array(P),D=0;D<P;D++)T[D]=arguments[D];(i=$r[a])===null||i===void 0||i.call.apply(i,[$r].concat(T)),er[a].apply(er,T)})});var aa=o.cloneElement(Vr,q(q({},$r),de)),na={x:Se,y:De},ta=G?q({},G!==!0?G:{}):null;return o.createElement(o.Fragment,null,o.createElement(Ca,{disabled:!R,ref:Re,onResize:pe},o.createElement(Ea,{getTriggerDOMNode:ur},aa)),o.createElement(ca.Provider,{value:Fe},o.createElement(Ba,{portal:r,ref:je,prefixCls:u,popup:Er,className:ae(gr,ze),style:yr,target:ar,onMouseEnter:re,onMouseLeave:Hr,onPointerEnter:re,zIndex:B,open:R,keepDom:xr,fresh:Fr,onClick:E,onPointerDownCapture:ea,mask:U,motion:we,maskMotion:Ve,onVisibleChanged:ra,onPrepare:ce,forceRender:Sr,autoDestroy:V,getPopupContainer:kr,align:Yr,arrow:ta,arrowPos:na,ready:Pe,offsetX:Qe,offsetY:Kr,offsetR:ke,offsetB:Ge,onAlign:dr,stretch:F,targetWidth:Ie/Zr,targetHeight:Ye/Ne})))});return n}const Ia=Ja(Ma);export{Ia as T,Wa as i};
