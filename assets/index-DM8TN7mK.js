import{I as Br,e as L,t as ua,f as K,K as Da,M as la,N as $a,G as Na,q as I,c as ar,O as La,_ as Ta,l as Ea,P as Ra,Q as Ha,s as Ke,R as sa,S as va,i as Ba}from"./asyncToGenerator-DsTQvBob.js";import{r as n,f as Ia}from"./index-D4JZ8mq1.js";import{r as Fa}from"./index-B6Q9mm_c.js";import{R as xa}from"./context-CReUDz-W.js";import{i as qa}from"./isVisible-Djd6in1q.js";const yt=(e,a,r)=>r!==void 0?r:`${e}-${a}`,ja=e=>({animationDuration:e,animationFillMode:"both"}),_a=e=>({animationDuration:e,animationFillMode:"both"}),wt=function(e,a,r,t){const u=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${u}${e}-enter,
      ${u}${e}-appear
    `]:Object.assign(Object.assign({},ja(t)),{animationPlayState:"paused"}),[`${u}${e}-leave`]:Object.assign(Object.assign({},_a(t)),{animationPlayState:"paused"}),[`
      ${u}${e}-enter${e}-enter-active,
      ${u}${e}-appear${e}-appear-active
    `]:{animationName:a,animationPlayState:"running"},[`${u}${e}-leave${e}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}};var za=n.createContext(null),fa=[];function Aa(e,a){var r=n.useState(function(){if(!Br())return null;var f=document.createElement("div");return f}),t=L(r,1),o=t[0],u=n.useRef(!1),s=n.useContext(za),c=n.useState(fa),h=L(c,2),m=h[0],T=h[1],g=s||(u.current?void 0:function(f){T(function(M){var S=[f].concat(ua(M));return S})});function y(){o.parentElement||document.body.appendChild(o),u.current=!0}function v(){var f;(f=o.parentElement)===null||f===void 0||f.removeChild(o),u.current=!1}return K(function(){return e?s?s(y):y():v(),v},[e]),K(function(){m.length&&(m.forEach(function(f){return f()}),T(fa))},[m]),[o,g]}function Ua(e){var a="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),r=document.createElement("div");r.id=a;var t=r.style;t.position="absolute",t.left="0",t.top="0",t.width="100px",t.height="100px",t.overflow="scroll";var o,u;if(e){var s=getComputedStyle(e);t.scrollbarColor=s.scrollbarColor,t.scrollbarWidth=s.scrollbarWidth;var c=getComputedStyle(e,"::-webkit-scrollbar"),h=parseInt(c.width,10),m=parseInt(c.height,10);try{var T=h?"width: ".concat(c.width,";"):"",g=m?"height: ".concat(c.height,";"):"";Da(`
#`.concat(a,`::-webkit-scrollbar {
`).concat(T,`
`).concat(g,`
}`),a)}catch(f){console.error(f),o=h,u=m}}document.body.appendChild(r);var y=e&&o&&!isNaN(o)?o:r.offsetWidth-r.clientWidth,v=e&&u&&!isNaN(u)?u:r.offsetHeight-r.clientHeight;return document.body.removeChild(r),la(a),{width:y,height:v}}function Va(e){return typeof document>"u"||!e||!(e instanceof Element)?{width:0,height:0}:Ua(e)}function Qa(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Ga="rc-util-locker-".concat(Date.now()),ma=0;function Ja(e){var a=!!e,r=n.useState(function(){return ma+=1,"".concat(Ga,"_").concat(ma)}),t=L(r,1),o=t[0];K(function(){if(a){var u=Va(document.body).width,s=Qa();Da(`
html body {
  overflow-y: hidden;
  `.concat(s?"width: calc(100% - ".concat(u,"px);"):"",`
}`),o)}else la(o);return function(){la(o)}},[a,o])}var Ka=!1;function Za(e){return Ka}var ha=function(a){return a===!1?!1:!Br()||!a?null:typeof a=="string"?document.querySelector(a):typeof a=="function"?a():a},Wa=n.forwardRef(function(e,a){var r=e.open,t=e.autoLock,o=e.getContainer;e.debug;var u=e.autoDestroy,s=u===void 0?!0:u,c=e.children,h=n.useState(r),m=L(h,2),T=m[0],g=m[1],y=T||r;n.useEffect(function(){(s||r)&&g(r)},[r,s]);var v=n.useState(function(){return ha(o)}),f=L(v,2),M=f[0],S=f[1];n.useEffect(function(){var te=ha(o);S(te??null)});var D=Aa(y&&!M),z=L(D,2),$=z[0],F=z[1],E=M??$;Ja(t&&r&&Br()&&(E===$||E===document.body));var d=null;if(c&&$a(c)&&a){var ve=c;d=ve.ref}var ce=Na(d,a);if(!y||!Br()||M===void 0)return null;var ae=E===!1||Za(),Z=c;return a&&(Z=n.cloneElement(c,{ref:ce})),n.createElement(za.Provider,{value:F},ae?Z:Fa.createPortal(Z,E))});function Ya(){var e=I({},Ia);return e.useId}var ga=0,ya=Ya();const Xa=ya?function(a){var r=ya();return a||r}:function(a){var r=n.useState("ssr-id"),t=L(r,2),o=t[0],u=t[1];return n.useEffect(function(){var s=ga;ga+=1,u("rc_unique_".concat(s))},[]),a||o},Oa=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};function pa(e){var a=e.prefixCls,r=e.align,t=e.arrow,o=e.arrowPos,u=t||{},s=u.className,c=u.content,h=o.x,m=h===void 0?0:h,T=o.y,g=T===void 0?0:T,y=n.useRef();if(!r||!r.points)return null;var v={position:"absolute"};if(r.autoArrow!==!1){var f=r.points[0],M=r.points[1],S=f[0],D=f[1],z=M[0],$=M[1];S===z||!["t","b"].includes(S)?v.top=g:S==="t"?v.top=0:v.bottom=0,D===$||!["l","r"].includes(D)?v.left=m:D==="l"?v.left=0:v.right=0}return n.createElement("div",{ref:y,className:ar("".concat(a,"-arrow"),s),style:v},c)}function et(e){var a=e.prefixCls,r=e.open,t=e.zIndex,o=e.mask,u=e.motion;return o?n.createElement(La,Ta({},u,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(s){var c=s.className;return n.createElement("div",{style:{zIndex:t},className:ar("".concat(a,"-mask"),c)})}):null}var rt=n.memo(function(e){var a=e.children;return a},function(e,a){return a.cache}),at=n.forwardRef(function(e,a){var r=e.popup,t=e.className,o=e.prefixCls,u=e.style,s=e.target,c=e.onVisibleChanged,h=e.open,m=e.keepDom,T=e.fresh,g=e.onClick,y=e.mask,v=e.arrow,f=e.arrowPos,M=e.align,S=e.motion,D=e.maskMotion,z=e.forceRender,$=e.getPopupContainer,F=e.autoDestroy,E=e.portal,d=e.zIndex,ve=e.onMouseEnter,ce=e.onMouseLeave,ae=e.onPointerEnter,Z=e.onPointerDownCapture,te=e.ready,Ce=e.offsetX,Me=e.offsetY,de=e.offsetR,Se=e.offsetB,V=e.onAlign,Pe=e.onPrepare,H=e.stretch,q=e.targetWidth,w=e.targetHeight,Be=typeof r=="function"?r():r,ne=h||m,B=($==null?void 0:$.length)>0,b=n.useState(!$||!B),Q=L(b,2),Ie=Q[0],tr=Q[1];if(K(function(){!Ie&&B&&s&&tr(!0)},[Ie,B,s]),!Ie)return null;var fe="auto",G={left:"-1000vw",top:"-1000vh",right:fe,bottom:fe};if(te||!h){var Ne,Fe=M.points,Y=M.dynamicInset||((Ne=M._experimental)===null||Ne===void 0?void 0:Ne.dynamicInset),me=Y&&Fe[0][1]==="r",oe=Y&&Fe[0][0]==="b";me?(G.right=de,G.left=fe):(G.left=Ce,G.right=fe),oe?(G.bottom=Se,G.top=fe):(G.top=Me,G.bottom=fe)}var U={};return H&&(H.includes("height")&&w?U.height=w:H.includes("minHeight")&&w&&(U.minHeight=w),H.includes("width")&&q?U.width=q:H.includes("minWidth")&&q&&(U.minWidth=q)),h||(U.pointerEvents="none"),n.createElement(E,{open:z||ne,getContainer:$&&function(){return $(s)},autoDestroy:F},n.createElement(et,{prefixCls:o,open:h,zIndex:d,mask:y,motion:D}),n.createElement(xa,{onResize:V,disabled:!h},function(nr){return n.createElement(La,Ta({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:z,leavedClassName:"".concat(o,"-hidden")},S,{onAppearPrepare:Pe,onEnterPrepare:Pe,visible:h,onVisibleChanged:function(X){var he;S==null||(he=S.onVisibleChanged)===null||he===void 0||he.call(S,X),c(X)}}),function(Le,X){var he=Le.className,qe=Le.style,j=ar(o,he,t);return n.createElement("div",{ref:Ea(nr,a,X),className:j,style:I(I(I(I({"--arrow-x":"".concat(f.x||0,"px"),"--arrow-y":"".concat(f.y||0,"px")},G),U),qe),{},{boxSizing:"border-box",zIndex:d},u),onMouseEnter:ve,onMouseLeave:ce,onPointerEnter:ae,onClick:g,onPointerDownCapture:Z},v&&n.createElement(pa,{prefixCls:o,arrow:v,arrowPos:f,align:M}),n.createElement(rt,{cache:!h&&!T},Be))})}))}),tt=n.forwardRef(function(e,a){var r=e.children,t=e.getTriggerDOMNode,o=$a(r),u=n.useCallback(function(c){Ra(a,t?t(c):c)},[t]),s=Na(u,Ha(r));return o?n.cloneElement(r,{ref:s}):r}),wa=n.createContext(null);function ba(e){return e?Array.isArray(e)?e:[e]:[]}function nt(e,a,r,t){return n.useMemo(function(){var o=ba(r??a),u=ba(t??a),s=new Set(o),c=new Set(u);return e&&(s.has("hover")&&(s.delete("hover"),s.add("click")),c.has("hover")&&(c.delete("hover"),c.add("click"))),[s,c]},[e,a,r,t])}function ot(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===a[0]:e[0]===a[0]&&e[1]===a[1]}function it(e,a,r,t){for(var o=r.points,u=Object.keys(e),s=0;s<u.length;s+=1){var c,h=u[s];if(ot((c=e[h])===null||c===void 0?void 0:c.points,o,t))return"".concat(a,"-placement-").concat(h)}return""}function Ca(e,a,r,t){return a||(r?{motionName:"".concat(e,"-").concat(r)}:t?{motionName:t}:null)}function hr(e){return e.ownerDocument.defaultView}function ca(e){for(var a=[],r=e==null?void 0:e.parentElement,t=["hidden","scroll","clip","auto"];r;){var o=hr(r).getComputedStyle(r),u=o.overflowX,s=o.overflowY,c=o.overflow;[u,s,c].some(function(h){return t.includes(h)})&&a.push(r),r=r.parentElement}return a}function mr(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?a:e}function fr(e){return mr(parseFloat(e),0)}function Ma(e,a){var r=I({},e);return(a||[]).forEach(function(t){if(!(t instanceof HTMLBodyElement||t instanceof HTMLHtmlElement)){var o=hr(t).getComputedStyle(t),u=o.overflow,s=o.overflowClipMargin,c=o.borderTopWidth,h=o.borderBottomWidth,m=o.borderLeftWidth,T=o.borderRightWidth,g=t.getBoundingClientRect(),y=t.offsetHeight,v=t.clientHeight,f=t.offsetWidth,M=t.clientWidth,S=fr(c),D=fr(h),z=fr(m),$=fr(T),F=mr(Math.round(g.width/f*1e3)/1e3),E=mr(Math.round(g.height/y*1e3)/1e3),d=(f-M-z-$)*F,ve=(y-v-S-D)*E,ce=S*E,ae=D*E,Z=z*F,te=$*F,Ce=0,Me=0;if(u==="clip"){var de=fr(s);Ce=de*F,Me=de*E}var Se=g.x+Z-Ce,V=g.y+ce-Me,Pe=Se+g.width+2*Ce-Z-te-d,H=V+g.height+2*Me-ce-ae-ve;r.left=Math.max(r.left,Se),r.top=Math.max(r.top,V),r.right=Math.min(r.right,Pe),r.bottom=Math.min(r.bottom,H)}}),r}function Sa(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(a),t=r.match(/^(.*)\%$/);return t?e*(parseFloat(t[1])/100):parseFloat(r)}function Pa(e,a){var r=a||[],t=L(r,2),o=t[0],u=t[1];return[Sa(e.width,o),Sa(e.height,u)]}function ka(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function rr(e,a){var r=a[0],t=a[1],o,u;return r==="t"?u=e.y:r==="b"?u=e.y+e.height:u=e.y+e.height/2,t==="l"?o=e.x:t==="r"?o=e.x+e.width:o=e.x+e.width/2,{x:o,y:u}}function He(e,a){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(t,o){return o===a?r[t]||"c":t}).join("")}function ut(e,a,r,t,o,u,s){var c=n.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[t]||{}}),h=L(c,2),m=h[0],T=h[1],g=n.useRef(0),y=n.useMemo(function(){return a?ca(a):[]},[a]),v=n.useRef({}),f=function(){v.current={}};e||f();var M=Ke(function(){if(a&&r&&e){let re=function(er,Ee){var Re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gr,dr=b.x+er,Er=b.y+Ee,ta=dr+me,na=Er+Y,oa=Math.max(dr,Re.left),i=Math.max(Er,Re.top),l=Math.min(ta,Re.right),N=Math.min(na,Re.bottom);return Math.max(0,(l-oa)*(N-i))},Wr=function(){Ue=b.y+k,Ve=Ue+Y,De=b.x+C,Ye=De+me};var z,$,F,E,d=a,ve=d.ownerDocument,ce=hr(d),ae=ce.getComputedStyle(d),Z=ae.width,te=ae.height,Ce=ae.position,Me=d.style.left,de=d.style.top,Se=d.style.right,V=d.style.bottom,Pe=d.style.overflow,H=I(I({},o[t]),u),q=ve.createElement("div");(z=d.parentElement)===null||z===void 0||z.appendChild(q),q.style.left="".concat(d.offsetLeft,"px"),q.style.top="".concat(d.offsetTop,"px"),q.style.position=Ce,q.style.height="".concat(d.offsetHeight,"px"),q.style.width="".concat(d.offsetWidth,"px"),d.style.left="0",d.style.top="0",d.style.right="auto",d.style.bottom="auto",d.style.overflow="hidden";var w;if(Array.isArray(r))w={x:r[0],y:r[1],width:0,height:0};else{var Be,ne,B=r.getBoundingClientRect();B.x=(Be=B.x)!==null&&Be!==void 0?Be:B.left,B.y=(ne=B.y)!==null&&ne!==void 0?ne:B.top,w={x:B.x,y:B.y,width:B.width,height:B.height}}var b=d.getBoundingClientRect();b.x=($=b.x)!==null&&$!==void 0?$:b.left,b.y=(F=b.y)!==null&&F!==void 0?F:b.top;var Q=ve.documentElement,Ie=Q.clientWidth,tr=Q.clientHeight,fe=Q.scrollWidth,G=Q.scrollHeight,Ne=Q.scrollTop,Fe=Q.scrollLeft,Y=b.height,me=b.width,oe=w.height,U=w.width,nr={left:0,top:0,right:Ie,bottom:tr},Le={left:-Fe,top:-Ne,right:fe-Fe,bottom:G-Ne},X=H.htmlRegion,he="visible",qe="visibleFirst";X!=="scroll"&&X!==qe&&(X=he);var j=X===qe,Ir=Ma(Le,y),P=Ma(nr,y),gr=X===he?P:Ir,je=j?P:gr;d.style.left="auto",d.style.top="auto",d.style.right="0",d.style.bottom="0";var _=d.getBoundingClientRect();d.style.left=Me,d.style.top=de,d.style.right=Se,d.style.bottom=V,d.style.overflow=Pe,(E=d.parentElement)===null||E===void 0||E.removeChild(q);var Te=mr(Math.round(me/parseFloat(Z)*1e3)/1e3),ke=mr(Math.round(Y/parseFloat(te)*1e3)/1e3);if(Te===0||ke===0||sa(r)&&!qa(r))return;var Fr=H.offset,qr=H.targetOffset,yr=Pa(b,Fr),ie=L(yr,2),ue=ie[0],O=ie[1],jr=Pa(w,qr),_e=L(jr,2),p=_e[0],xe=_e[1];w.x-=p,w.y-=xe;var _r=H.points||[],wr=L(_r,2),Ar=wr[0],Ur=wr[1],ge=ka(Ur),J=ka(Ar),or=rr(w,ge),A=rr(b,J),ze=I({},H),C=or.x-A.x+ue,k=or.y-A.y+O,le=re(C,k),Ae=re(C,k,P),ir=rr(w,["t","l"]),ee=rr(b,["t","l"]),br=rr(w,["b","r"]),ur=rr(b,["b","r"]),We=H.overflow||{},Cr=We.adjustX,Vr=We.adjustY,lr=We.shiftX,Ze=We.shiftY,sr=function(Ee){return typeof Ee=="boolean"?Ee:Ee>=0},Ue,Ve,De,Ye;Wr();var Qe=sr(Vr),Mr=J[0]===ge[0];if(Qe&&J[0]==="t"&&(Ve>je.bottom||v.current.bt)){var R=k;Mr?R-=Y-oe:R=ir.y-ur.y-O;var Sr=re(C,R),Qr=re(C,R,P);Sr>le||Sr===le&&(!j||Qr>=Ae)?(v.current.bt=!0,k=R,O=-O,ze.points=[He(J,0),He(ge,0)]):v.current.bt=!1}if(Qe&&J[0]==="b"&&(Ue<je.top||v.current.tb)){var Ge=k;Mr?Ge+=Y-oe:Ge=br.y-ee.y-O;var Pr=re(C,Ge),Gr=re(C,Ge,P);Pr>le||Pr===le&&(!j||Gr>=Ae)?(v.current.tb=!0,k=Ge,O=-O,ze.points=[He(J,0),He(ge,0)]):v.current.tb=!1}var kr=sr(Cr),Dr=J[1]===ge[1];if(kr&&J[1]==="l"&&(Ye>je.right||v.current.rl)){var Je=C;Dr?Je-=me-U:Je=ir.x-ur.x-ue;var $r=re(Je,k),Xe=re(Je,k,P);$r>le||$r===le&&(!j||Xe>=Ae)?(v.current.rl=!0,C=Je,ue=-ue,ze.points=[He(J,1),He(ge,1)]):v.current.rl=!1}if(kr&&J[1]==="r"&&(De<je.left||v.current.lr)){var $e=C;Dr?$e+=me-U:$e=br.x-ee.x-ue;var Nr=re($e,k),Lr=re($e,k,P);Nr>le||Nr===le&&(!j||Lr>=Ae)?(v.current.lr=!0,C=$e,ue=-ue,ze.points=[He(J,1),He(ge,1)]):v.current.lr=!1}Wr();var ye=lr===!0?0:lr;typeof ye=="number"&&(De<P.left&&(C-=De-P.left-ue,w.x+U<P.left+ye&&(C+=w.x-P.left+U-ye)),Ye>P.right&&(C-=Ye-P.right-ue,w.x>P.right-ye&&(C+=w.x-P.right+ye)));var se=Ze===!0?0:Ze;typeof se=="number"&&(Ue<P.top&&(k-=Ue-P.top-O,w.y+oe<P.top+se&&(k+=w.y-P.top+oe-se)),Ve>P.bottom&&(k-=Ve-P.bottom-O,w.y>P.bottom-se&&(k+=w.y-P.bottom+se)));var Oe=b.x+C,pe=Oe+me,we=b.y+k,Jr=we+Y,Tr=w.x,Kr=Tr+U,vr=w.y,Zr=vr+oe,Yr=Math.max(Oe,Tr),Xr=Math.min(pe,Kr),xr=(Yr+Xr)/2,Or=xr-Oe,pr=Math.max(we,vr),zr=Math.min(Jr,Zr),ea=(pr+zr)/2,ra=ea-we;s==null||s(a,ze);var cr=_.right-b.x-(C+b.width),be=_.bottom-b.y-(k+b.height);Te===1&&(C=Math.round(C),cr=Math.round(cr)),ke===1&&(k=Math.round(k),be=Math.round(be));var aa={ready:!0,offsetX:C/Te,offsetY:k/ke,offsetR:cr/Te,offsetB:be/ke,arrowX:Or/Te,arrowY:ra/ke,scaleX:Te,scaleY:ke,align:ze};T(aa)}}),S=function(){g.current+=1;var $=g.current;Promise.resolve().then(function(){g.current===$&&M()})},D=function(){T(function($){return I(I({},$),{},{ready:!1})})};return K(D,[t]),K(function(){e||D()},[e]),[m.ready,m.offsetX,m.offsetY,m.offsetR,m.offsetB,m.arrowX,m.arrowY,m.scaleX,m.scaleY,m.align,S]}function lt(e,a,r,t,o){K(function(){if(e&&a&&r){let g=function(){t(),o()};var u=a,s=r,c=ca(u),h=ca(s),m=hr(s),T=new Set([m].concat(ua(c),ua(h)));return T.forEach(function(y){y.addEventListener("scroll",g,{passive:!0})}),m.addEventListener("resize",g,{passive:!0}),t(),function(){T.forEach(function(y){y.removeEventListener("scroll",g),m.removeEventListener("resize",g)})}}},[e,a,r])}function st(e,a,r,t,o,u,s,c){var h=n.useRef(e);h.current=e;var m=n.useRef(!1);n.useEffect(function(){if(a&&t&&(!o||u)){var g=function(){m.current=!1},y=function(S){var D;h.current&&!s(((D=S.composedPath)===null||D===void 0||(D=D.call(S))===null||D===void 0?void 0:D[0])||S.target)&&!m.current&&c(!1)},v=hr(t);v.addEventListener("pointerdown",g,!0),v.addEventListener("mousedown",y,!0),v.addEventListener("contextmenu",y,!0);var f=va(r);return f&&(f.addEventListener("mousedown",y,!0),f.addEventListener("contextmenu",y,!0)),function(){v.removeEventListener("pointerdown",g,!0),v.removeEventListener("mousedown",y,!0),v.removeEventListener("contextmenu",y,!0),f&&(f.removeEventListener("mousedown",y,!0),f.removeEventListener("contextmenu",y,!0))}}},[a,r,t,o,u]);function T(){m.current=!0}return T}var vt=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function ct(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wa,a=n.forwardRef(function(r,t){var o=r.prefixCls,u=o===void 0?"rc-trigger-popup":o,s=r.children,c=r.action,h=c===void 0?"hover":c,m=r.showAction,T=r.hideAction,g=r.popupVisible,y=r.defaultPopupVisible,v=r.onPopupVisibleChange,f=r.afterPopupVisibleChange,M=r.mouseEnterDelay,S=r.mouseLeaveDelay,D=S===void 0?.1:S,z=r.focusDelay,$=r.blurDelay,F=r.mask,E=r.maskClosable,d=E===void 0?!0:E,ve=r.getPopupContainer,ce=r.forceRender,ae=r.autoDestroy,Z=r.destroyPopupOnHide,te=r.popup,Ce=r.popupClassName,Me=r.popupStyle,de=r.popupPlacement,Se=r.builtinPlacements,V=Se===void 0?{}:Se,Pe=r.popupAlign,H=r.zIndex,q=r.stretch,w=r.getPopupClassNameFromAlign,Be=r.fresh,ne=r.alignPoint,B=r.onPopupClick,b=r.onPopupAlign,Q=r.arrow,Ie=r.popupMotion,tr=r.maskMotion,fe=r.popupTransitionName,G=r.popupAnimation,Ne=r.maskTransitionName,Fe=r.maskAnimation,Y=r.className,me=r.getTriggerDOMNode,oe=Ba(r,vt),U=ae||Z||!1,nr=n.useState(!1),Le=L(nr,2),X=Le[0],he=Le[1];K(function(){he(Oa())},[]);var qe=n.useRef({}),j=n.useContext(wa),Ir=n.useMemo(function(){return{registerSubPopup:function(l,N){qe.current[l]=N,j==null||j.registerSubPopup(l,N)}}},[j]),P=Xa(),gr=n.useState(null),je=L(gr,2),_=je[0],Te=je[1],ke=n.useRef(null),Fr=Ke(function(i){ke.current=i,sa(i)&&_!==i&&Te(i),j==null||j.registerSubPopup(P,i)}),qr=n.useState(null),yr=L(qr,2),ie=yr[0],ue=yr[1],O=n.useRef(null),jr=Ke(function(i){sa(i)&&ie!==i&&(ue(i),O.current=i)}),_e=n.Children.only(s),p=(_e==null?void 0:_e.props)||{},xe={},_r=Ke(function(i){var l,N,W=ie;return(W==null?void 0:W.contains(i))||((l=va(W))===null||l===void 0?void 0:l.host)===i||i===W||(_==null?void 0:_.contains(i))||((N=va(_))===null||N===void 0?void 0:N.host)===i||i===_||Object.values(qe.current).some(function(x){return(x==null?void 0:x.contains(i))||i===x})}),wr=Ca(u,Ie,G,fe),Ar=Ca(u,tr,Fe,Ne),Ur=n.useState(y||!1),ge=L(Ur,2),J=ge[0],or=ge[1],A=g??J,ze=Ke(function(i){g===void 0&&or(i)});K(function(){or(g||!1)},[g]);var C=n.useRef(A);C.current=A;var k=n.useRef([]);k.current=[];var le=Ke(function(i){var l;ze(i),((l=k.current[k.current.length-1])!==null&&l!==void 0?l:A)!==i&&(k.current.push(i),v==null||v(i))}),Ae=n.useRef(),ir=function(){clearTimeout(Ae.current)},ee=function(l){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ir(),N===0?le(l):Ae.current=setTimeout(function(){le(l)},N*1e3)};n.useEffect(function(){return ir},[]);var br=n.useState(!1),ur=L(br,2),We=ur[0],Cr=ur[1];K(function(i){(!i||A)&&Cr(!0)},[A]);var Vr=n.useState(null),lr=L(Vr,2),Ze=lr[0],sr=lr[1],Ue=n.useState(null),Ve=L(Ue,2),De=Ve[0],Ye=Ve[1],Qe=function(l){Ye([l.clientX,l.clientY])},Mr=ut(A,_,ne&&De!==null?De:ie,de,V,Pe,b),R=L(Mr,11),Sr=R[0],Qr=R[1],Ge=R[2],Pr=R[3],Gr=R[4],kr=R[5],Dr=R[6],Je=R[7],$r=R[8],Xe=R[9],$e=R[10],Nr=nt(X,h,m,T),Lr=L(Nr,2),ye=Lr[0],se=Lr[1],Oe=ye.has("click"),pe=se.has("click")||se.has("contextMenu"),we=Ke(function(){We||$e()}),Jr=function(){C.current&&ne&&pe&&ee(!1)};lt(A,ie,_,we,Jr),K(function(){we()},[De,de]),K(function(){A&&!(V!=null&&V[de])&&we()},[JSON.stringify(Pe)]);var Tr=n.useMemo(function(){var i=it(V,u,Xe,ne);return ar(i,w==null?void 0:w(Xe))},[Xe,w,V,u,ne]);n.useImperativeHandle(t,function(){return{nativeElement:O.current,popupElement:ke.current,forceAlign:we}});var Kr=n.useState(0),vr=L(Kr,2),Zr=vr[0],Yr=vr[1],Xr=n.useState(0),xr=L(Xr,2),Or=xr[0],pr=xr[1],zr=function(){if(q&&ie){var l=ie.getBoundingClientRect();Yr(l.width),pr(l.height)}},ea=function(){zr(),we()},ra=function(l){Cr(!1),$e(),f==null||f(l)},cr=function(){return new Promise(function(l){zr(),sr(function(){return l})})};K(function(){Ze&&($e(),Ze(),sr(null))},[Ze]);function be(i,l,N,W){xe[i]=function(x){var Rr;W==null||W(x),ee(l,N);for(var ia=arguments.length,da=new Array(ia>1?ia-1:0),Hr=1;Hr<ia;Hr++)da[Hr-1]=arguments[Hr];(Rr=p[i])===null||Rr===void 0||Rr.call.apply(Rr,[p,x].concat(da))}}(Oe||pe)&&(xe.onClick=function(i){var l;C.current&&pe?ee(!1):!C.current&&Oe&&(Qe(i),ee(!0));for(var N=arguments.length,W=new Array(N>1?N-1:0),x=1;x<N;x++)W[x-1]=arguments[x];(l=p.onClick)===null||l===void 0||l.call.apply(l,[p,i].concat(W))});var aa=st(A,pe,ie,_,F,d,_r,ee),re=ye.has("hover"),Wr=se.has("hover"),er,Ee;re&&(be("onMouseEnter",!0,M,function(i){Qe(i)}),be("onPointerEnter",!0,M,function(i){Qe(i)}),er=function(l){(A||We)&&_!==null&&_!==void 0&&_.contains(l.target)&&ee(!0,M)},ne&&(xe.onMouseMove=function(i){var l;(l=p.onMouseMove)===null||l===void 0||l.call(p,i)})),Wr&&(be("onMouseLeave",!1,D),be("onPointerLeave",!1,D),Ee=function(){ee(!1,D)}),ye.has("focus")&&be("onFocus",!0,z),se.has("focus")&&be("onBlur",!1,$),ye.has("contextMenu")&&(xe.onContextMenu=function(i){var l;C.current&&se.has("contextMenu")?ee(!1):(Qe(i),ee(!0)),i.preventDefault();for(var N=arguments.length,W=new Array(N>1?N-1:0),x=1;x<N;x++)W[x-1]=arguments[x];(l=p.onContextMenu)===null||l===void 0||l.call.apply(l,[p,i].concat(W))}),Y&&(xe.className=ar(p.className,Y));var Re=I(I({},p),xe),dr={},Er=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Er.forEach(function(i){oe[i]&&(dr[i]=function(){for(var l,N=arguments.length,W=new Array(N),x=0;x<N;x++)W[x]=arguments[x];(l=Re[i])===null||l===void 0||l.call.apply(l,[Re].concat(W)),oe[i].apply(oe,W)})});var ta=n.cloneElement(_e,I(I({},Re),dr)),na={x:kr,y:Dr},oa=Q?I({},Q!==!0?Q:{}):null;return n.createElement(n.Fragment,null,n.createElement(xa,{disabled:!A,ref:jr,onResize:ea},n.createElement(tt,{getTriggerDOMNode:me},ta)),n.createElement(wa.Provider,{value:Ir},n.createElement(at,{portal:e,ref:Fr,prefixCls:u,popup:te,className:ar(Ce,Tr),style:Me,target:ie,onMouseEnter:er,onMouseLeave:Ee,onPointerEnter:er,zIndex:H,open:A,keepDom:We,fresh:Be,onClick:B,onPointerDownCapture:aa,mask:F,motion:wr,maskMotion:Ar,onVisibleChanged:ra,onPrepare:cr,forceRender:ce,autoDestroy:U,getPopupContainer:ve,align:Xe,arrow:oa,arrowPos:na,ready:Sr,offsetX:Qr,offsetY:Ge,offsetR:Pr,offsetB:Gr,onAlign:we,stretch:q,targetWidth:Zr/Je,targetHeight:Or/$r})))});return a}const bt=ct(Wa);export{bt as T,wt as a,yt as g,Oa as i,Xa as u};
